<div class="container">

  <h2>対局場所詳細</h2>

  <div class="row">
    <div class="col-5">
      <!-- Googleマップ表示エリア(地図を表示) -->
      <div style="width:400px; height:400px;" id="map"></div>

      <!-- Googleマップ表示用の Javascript -->
      <script>
        function initMap(){
        // 地図の位置情報(緯度・経度)を取得
        let mapPosition = {lat: <%= @post_shogi_place.latitude || 0 %> , lng: <%= @post_shogi_place.longitude || 0 %> };
        let map = new google.maps.Map(document.getElementById('map'), {
          zoom: 15,
          center: mapPosition
        });
        let transitLayer = new google.maps.TransitLayer();
        transitLayer.setMap(map);

        let contentString = '【住所】<%= @post_shogi_place.address %>';
        let infowindow = new google.maps.InfoWindow({
          content: contentString
        });

        let marker = new google.maps.Marker({
          position: mapPosition,
          map: map,
          title: contentString
        });

        marker.addListener('click', function(){
          infowindow.open(map, marker);
        });
      }
      </script>

      <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_API_KEY'] %>&callback=initMap" async defer></script>

      <!--タグリスト-->
      <% @tags.each do |tag| %>
        <%= tag.name %>
      <% end %>

      <br>
      <%= image_tag @post_shogi_place.customer.get_customer_image(80,80) %>
      <%= @post_shogi_place.customer.name %><br>
      <p>投稿日</p>
      <%= @post_shogi_place.created_at.strftime("%Y年%m月%d日") %>

      <% if @post_shogi_place.customer.id==current_customer.id %>
        <%= link_to "投稿編集",edit_post_shogi_place_path(@post_shogi_place.id) %>
        <%= link_to "投稿削除",post_shogi_place_path(@post_shogi_place.id),method: :delete,"data-confirm"=>"本当に削除しますか？" %>
      <% end %>
    </div>

    <div class="col-5">
      <p>対局場所名</p>
      <%= @post_shogi_place.name %>

      <p>場所</p>
      <%= @post_shogi_place.prefecture.name %>

      <p>住所</p>
      <%= @post_shogi_place.address %>

      <p>電話番号</p>
      <%= @post_shogi_place.telephone_number %>

      <p>対象者</p>
      <% @post_shogi_place.target_audiences.each do |target_audience| %>
        <%= target_audiences.name %>
      <% end %>

      <p>説明</p>
      <%= @post_shogi_place.explanation %>
    </div>
  </div>
</div>
